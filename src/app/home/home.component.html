<mat-sidenav-container class="sidenav-container" >
  <mat-sidenav-content>
      <div class="bottom-style">
        <mat-form-field class="search-container">
          <mat-label> Ricerca per categoria </mat-label>
          <mat-select aria-label="Seleziona categoria" [(ngModel)]="selectedCategory" (selectionChange)="searchBy()" (focus)="onCategorySearchFieldFocus()" (blur)="onCategorySearchFieldBlur()">
            <mat-option value="" class="stile-categoria" [class.selected-category]="selectedCategory === ''"> Tutte le categorie </mat-option>
            <mat-option value="Action" class="stile-categoria" [class.selected-category]="selectedCategory === 'Action'"> Action</mat-option>
            <mat-option value="Animation" class="stile-categoria" [class.selected-category]="selectedCategory === 'Animation'"> Animation</mat-option>
            <mat-option value="Children" class="stile-categoria" [class.selected-category]="selectedCategory === 'Children'"> Children</mat-option>
            <mat-option value="Classics" class="stile-categoria" [class.selected-category]="selectedCategory === 'Classics'"> Classics</mat-option>
            <mat-option value="Comedy" class="stile-categoria" [class.selected-category]="selectedCategory === 'Comedy'"> Comedy</mat-option>
            <mat-option value="Documentary" class="stile-categoria" [class.selected-category]="selectedCategory === 'Documentary'"> Documentary</mat-option>
            <mat-option value="Drama" class="stile-categoria" [class.selected-category]="selectedCategory === 'Drama'"> Drama</mat-option>
            <mat-option value="Family" class="stile-categoria" [class.selected-category]="selectedCategory === 'Family'"> Family</mat-option>
            <mat-option value="Foreign" class="stile-categoria" [class.selected-category]="selectedCategory === 'Foreign'"> Foreign</mat-option>
            <mat-option value="Games" class="stile-categoria" [class.selected-category]="selectedCategory === 'Games'"> Games</mat-option>
            <mat-option value="Horror" class="stile-categoria" [class.selected-category]="selectedCategory === 'Horror'"> Horror</mat-option>
            <mat-option value="Music" class="stile-categoria" [class.selected-category]="selectedCategory === 'Music'"> Music</mat-option>
            <mat-option value="New" class="stile-categoria" [class.selected-category]="selectedCategory === 'New'"> New</mat-option>
            <mat-option value="Sci-Fi" class="stile-categoria" [class.selected-category]="selectedCategory === 'Sci-Fi'"> Sci-Fi</mat-option>
            <mat-option value="Sport" class="stile-categoria" [class.selected-category]="selectedCategory === 'Sport'"> Sport</mat-option>
            <mat-option value="Travel" class="stile-categoria" [class.selected-category]="selectedCategory === 'Travel'"> Travel</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="search-container">
          <input matInput type="text" placeholder="Ricerca per titolo" [(ngModel)]="searchFilter" (keyup)="searchBy()" aria-label="Cerca titolo di un film">
        </mat-form-field>
      </div>

  <div class="table">
    <mat-table [dataSource]="datasource">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef >
          <button (click)="orderBy('F.title')" mat-button tabindex="0">Titolo</button>
        </th>
        <td  mat-cell *matCellDef="let film">
          <button (click)="openMovieDetails(film)" mat-button tabindex="0">{{ film.title }}</button>
        </td>

      </ng-container>

        <ng-container matColumnDef="release_year">
          <th class="table-header" mat-header-cell *matHeaderCellDef>
            <button (click)="orderBy('F.release_year')" mat-button tabindex="0">Anno di uscita</button>
          </th>
          <td mat-cell *matCellDef="let film">{{ film.release_year }}</td>
        </ng-container>

        <ng-container matColumnDef="rating">
          <th class="table-header" mat-header-cell *matHeaderCellDef>
            <button (click)="orderBy('F.rating')" mat-button tabindex="0">Rating</button>
          </th>
          <td mat-cell *matCellDef="let film">{{ film.rating }}</td>
        </ng-container>

        <ng-container matColumnDef="genre">
          <th class="table-header" mat-header-cell *matHeaderCellDef>
            <button (click)="orderBy('genre')" mat-button tabindex="0">Genere</button>
          </th>
          <td mat-cell *matCellDef="let film">{{ film.genre }}</td>
        </ng-container>

        <ng-container matColumnDef="language">
          <th class="table-header" mat-header-cell *matHeaderCellDef>
            <button (click)="orderBy('language')" mat-button tabindex="0">Lingua</button>
          </th>
          <td mat-cell *matCellDef="let film">{{ film.language }}</td>
        </ng-container>

        <ng-container matColumnDef="cost">
          <th class="table-header" mat-header-cell *matHeaderCellDef>
            <button class="" (click)="orderBy('rental_rate')" mat-button tabindex="0">Costo</button>
          </th>
          <td mat-cell *matCellDef="let film">{{ film.rental_rate }} â‚¬ </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th class="table-header" mat-header-cell *matHeaderCellDef>Noleggio</th>
          <td mat-cell *matCellDef="let film" aria-label="Bottone per noleggio film">
            <button (click)="openRentComponent(film)" mat-button>Noleggia</button>
          </td>
        </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </mat-table>
    <mat-paginator [length]="totalResults"
                   (page)="onPageChange($event)"
                   [pageSizeOptions]="[10, 20, 30]"
                   [pageSize]="currentPageSize"
                   [showFirstLastButtons] = "true"
                   aria-label="Pulsanti per la navigazione della pagina">
    </mat-paginator>
  </div>
</mat-sidenav-content>
</mat-sidenav-container>
